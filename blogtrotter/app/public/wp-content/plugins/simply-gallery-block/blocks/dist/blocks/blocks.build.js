!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=95)}({0:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return w})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return y}));var r=n(8),o=n.n(r);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u="pgc_sgb_",p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"indexByPosition",value:function(e,t,n){var r=parseInt(t/e.width),o=Math.floor(n.y/e.height),a=Math.floor(n.x/e.width);return Math.max(0,o*r+a)}},{key:"moduleSettings",value:function(e){return window[e]&&window[e].settings?window[e].settings:null}},{key:"updateProperties",value:function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r+=1){var o=n[r];Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}}},{key:"copyProperties",value:function(e,t){return t=Object.assign(t,e)}},{key:"checkScrip",value:function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1){var r=t[n];if(r.src===e)return n=t.length,r}return!1}},{key:"loadExtScripts",value:function(t,n,r){var o=0;function a(){(o+=1)===t.length&&n&&r&&n.dispatchGMEvent(e.GMEvent(r))}function i(){e.trace(this.src,"error")}for(var l=0;l<t.length;l+=1){var c=t[l],s=e.checkScrip(c);s||((s=document.createElement("script")).src=c,s.async=!0,s.onload=a,s.onerror=i,document.body.appendChild(s))}}},{key:"getViewPortsBySelector",value:function(e){return document.querySelectorAll('div[data-gallery-id="'.concat(e,'"]'))}},{key:"requestAttachments",value:function(t,n,r,a){var i=new URL(t);i.searchParams.set("_fs_blog_admin","true");var l=new o.a;l.open("POST",i,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.onreadystatechange=function(){if(4===l.readyState){var e={};200!==l.status?e.error=l.statusText:e.data=l.responseText,r&&(e.params=r),a&&"function"==typeof a&&a(e)}},l.onerror=function(){e.trace("An error occurred while transferring the file.")};try{var s,u=[];for(s in n)if(Object.prototype.hasOwnProperty.call(n,s))if("object"===c(n[s])){for(var p in n[s])if(Object.prototype.hasOwnProperty.call(n[s],p))if(Array.isArray(n[s][p]))for(var f=n[s][p],m=0;m<f.length;m+=1)u.push("".concat(encodeURIComponent("".concat(s,"[").concat(p,"][]")),"=").concat(encodeURIComponent(f[m])));else u.push("".concat(encodeURIComponent("".concat(s,"[").concat(p,"]")),"=").concat(encodeURIComponent(n[s][p])))}else u.push("".concat(encodeURIComponent(s),"=").concat(encodeURIComponent(n[s])));l.send(u.join("&"))}catch(t){e.trace(t)}}},{key:"request2",value:function(t,n,r,a,i){var l=new URL(t),c=new o.a;c.open("POST",l,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c.onreadystatechange=function(){if(4===c.readyState){var e={};200!==c.status?e.error=c.statusText:e.data=c.responseText,a&&(e.params=a),i&&"function"==typeof i&&i(e)}},c.onerror=function(){e.trace("An error occurred while transferring the file.")};try{c.send("action=pgc_sgb_action_wizard&nonce=".concat(n,"&props=").concat(r))}catch(t){e.trace(t)}}},{key:"validURL",value:function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%@_.~+&:]*)*(\\?[;&a-z\\d%@_.,~+&:=-]*)?(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}},{key:"request",value:function(t,n,r,a,i,l){var c=new URL(t),s=new o.a;s.open("POST",c,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.onreadystatechange=function(){if(4===s.readyState){var e={};200!==s.status?e.error=s.statusText:e.data=s.responseText,i&&(e.params=i),l&&"function"==typeof l&&l(e)}},s.onerror=function(){e.trace("An error occurred while transferring the file.")};try{s.send("action=".concat(r,"&nonce=").concat(n,"&props=").concat(a))}catch(t){e.trace(t)}}},{key:"getMediaModal",value:function(e,t){if(window.wp&&window.wp.media){var n=window.wp,r={title:"Select Files",multiple:"add",type:void 0,exclusionList:[]};t&&(r=Object.assign(r,t));var o=n.media.controller.Library.prototype.defaults,a={order:"DESC",orderby:"id",post__not_in:r.exclusionList};r.type&&(a.type=r.type);var i=n.media.controller.Library.extend({defaults:Object.assign(o,{query:!0,id:"library",title:r.title,multiple:r.multiple,priority:20,library:new n.media.query(a)})});return n.media.frames[e]?r.exclusionList&&n.media.frames[e].once("open",(function(){n.media.frames[e].setExclusion(r.exclusionList)})):(n.media.frames[e]=n.media({state:"library",states:[new i]}),n.media.frames[e].updateCollection=function(){var e=this.content.get();if(e&&e.collection){var t=e.collection;t.toArray().forEach((function(e){return e.trigger("destroy",e)})),t.mirroring._hasMore=!0,t.more()}},n.media.frames[e].setExclusion=function(t){n.media.frames[e].content&&n.media.frames[e].content.get().collection&&n.media.frames[e].content.get().collection.props.set({post__not_in:t})},n.media.frames[e].selectedItems=function(){return n.media.frames[e].state()?n.media.frames[e].state().get("selection").models.map((function(e){return e.attributes})):[]},n.media.frames[e].on("open",(function(){var t,r=this.state(),o=r.get("library"),a=r.get("selection");function i(){a&&a.models&&a.some((function(e){return!0===e.get("uploading")}))?(clearTimeout(t),t=setTimeout(i,100)):o.add(a.models)}n.media.frames[e].updateCollection(),n.media.frames[e].on("library:selection:add",(function(){i()}))}),n.media.frames[e])),n.media.frames[e].off("select"),n.media.frames[e]}}},{key:"getAttachmentDetailsModal",value:function(e,t){var n=window.wp;if(n&&n.media)return n.media.frames.pgc_simply_detail?n.media.frames.pgc_simply_detail.content.get("collection").controller.library.reset(e.models):(n.media.frames.pgc_simply_detail=n.media({frame:"edit-attachments",controller:{gridRouter:new n.media.view.MediaFrame.Manage.Router},library:e,model:new n.media.model.Attachment}),n.media.frames.pgc_simply_detail.resetRoute=function(){}),n.media.frames.pgc_simply_detail.state().frame.trigger("refresh",e.findWhere({id:parseInt(t)})),n.media.frames.pgc_simply_detail}},{key:"getYouTubeData",value:function(t,n,r){var a=new URL("https://www.googleapis.com/youtube/v3/".concat(t));for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.searchParams.append(i,n[i]);var l=new o.a;l.open("GET",a,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.onreadystatechange=function(){if(4===l.readyState){var e={};200!==l.status?(e.error=l.statusText,r({error:l.status})):e.data=l.responseText,n&&(e.params=n),r&&"function"==typeof r&&r(e)}},l.onerror=function(t){e.trace("transfer Failed"),e.trace(t)};try{l.send()}catch(t){e.trace(t)}}},{key:"fetchAttachmentsMedia",value:function(e,t){var n=window.wp;if(n||n.media){var r=[];e&&(r=e.map((function(e){return n.media.attachment(e)}))),function e(n){n.more().then((function(){n.hasMore()?e(n):t(r)}))}(n.media.query({post__in:e,orderby:"post__in"}))}else this.trace("WP MEDIA Undefined!")}},{key:"Item",value:function(e){for(var t={model:["id","title","url","link","alt","description","caption","mime","type","image","thumb","width","height","fileLength","sizes","meta"]},n=0;n<t.model.length;n+=1){var r=t.model[n];Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}if(t.sizes){var o={};t.sizes.thumbnail&&(o.thumbnail=t.sizes.thumbnail),t.sizes.medium&&(o.medium=t.sizes.medium),t.sizes.large&&(o.large=t.sizes.large),t.sizes.full&&(o.full=t.sizes.full),t.sizes=o}if(delete t.model,!(Object.keys(t).length<=1))return t}},{key:"ICONS",get:function(){return{}}},{key:"isTouchDevice",get:function(){return window.wp&&wp.media&&wp.media.isTouchDevice?wp.media.isTouchDevice:window.navigator.maxTouchPoints||"ontouchstart"in window}},{key:"browser",get:function(){var e=window.navigator.userAgent,t=e.indexOf("Chrome")>-1;if(e.indexOf("MSIE")>-1)return"explorer";if(e.indexOf("Firefox")>-1)return"firefox";var n=e.indexOf("Safari")>-1,r=e.toLowerCase().indexOf("op")>-1;return r&&!t?"opera":t&&!r||t&&n?"chrome":n&&!t?"safari":void 0}},{key:"passiveListener",get:function(){var e=!1;try{var t={get:function(){e=!0}},n=Object.defineProperty({},"passive",t);window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch(e){}return!!e&&{passive:!1,capture:!1}}},{key:"pageXOffset",get:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}},{key:"pageYOffset",get:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},{key:"trace",get:function(){return console.log}}],(n=null)&&s(t.prototype,n),r&&s(t,r),e}();function f(e){var t={};if(t.view=document.createElement("div"),t.view.className="sgb-item",t.view.dataset.id=e.id,"image"!==e.type&&"audio"!==e.type||(t.itemImg=new Image,t.itemImg.alt=e.alt,t.itemImg.width=e.width?e.width:300,t.itemImg.height=e.height?e.width:300,t.itemImg.setAttribute("loading","lazy"),t.itemImg.src="audio"===e.type?"".concat(window.PGC_SGB_ADMIN.assets,"holder-mp3.png"):e.url,t.view.appendChild(t.itemImg)),"audio"===e.type){var n=document.createElement("audio");n.setAttribute("preload","metadata"),n.setAttribute("controlsList","nodownload"),n.setAttribute("controls",""),n.src=e.url,t.view.appendChild(n)}else if("video"===e.type){var r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("controlsList","nodownload"),r.setAttribute("controls",""),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),r.src=e.url,t.view.appendChild(r)}return t}function m(e){var t=document.createElement("div");if(t.className="sgb-gallery",e.length>0)for(var n=0;n<e.length;n+=1){var r=f(e[n]);t.appendChild(r.view)}return t.outerHTML}function d(e){var t={};if(t.view=document.createElement("div"),t.view.className="sgb-item",t.view.dataset.id=e.id,"image"!==e.type&&"audio"!==e.type||(t.itemImg=new Image,t.itemImg.alt=e.alt,t.itemImg.width=e.width?e.width:300,t.itemImg.height=e.height?e.width:300,t.itemImg.setAttribute("loading","auto"),t.itemImg.setAttribute("data-lazy-src",""),t.itemImg.className="skip-lazy",t.itemImg.classList.add("no-lazyload"),t.itemImg.classList.add("no-lazyload"),t.itemImg.classList.add("noLazy"),t.itemImg.src="audio"===e.type?"".concat(window.PGC_SGB_ADMIN.assets,"holder-mp3.png"):e.url,t.view.appendChild(t.itemImg)),"audio"===e.type){var n=document.createElement("audio");n.setAttribute("preload","metadata"),n.setAttribute("controlsList","nodownload"),n.setAttribute("controls",""),n.src=e.url,t.view.appendChild(n)}else if("video"===e.type){var r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("controlsList","nodownload"),r.setAttribute("controls",""),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),r.src=e.url,t.view.appendChild(r)}return t}function y(e){var t=document.createElement("div");if(t.className="sgb-gallery",e.length>0)for(var n=0;n<e.length;n+=1){var r=d(e[n]);t.appendChild(r.view)}return t.outerHTML}function g(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n].default);return t}function w(e){var t=i({},e);return delete t.galleryData,delete t.selections,delete t.startPosIndex,delete t.loading,delete t.needUpdate,delete t.ordrerDirection,delete t.gutIsSelected,delete t.subLoading,delete t.importModalIsOpen,delete t.attachmentsIDsString,delete t.attachmentsIDsVerified,delete t.loadingAttachments,JSON.stringify(t)}function h(e){var t={},n=i({},this.props.attributes);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);this.props.setAttributes(t),delete(n=i(i({},n),t)).galleryData,delete n.selections,delete n.startPosIndex,delete n.loading,delete n.needUpdate,delete n.ordrerDirection,delete n.gutIsSelected,delete n.subLoading,delete n.importModalIsOpen,delete n.attachmentsIDsString,delete n.attachmentsIDsVerified,delete n.loadingAttachments,delete n.galleryTagsListSrc,delete n.isPremium,delete n.dgbModalIsOpen,this.props.setAttributes({galleryData:JSON.stringify(n)})}},5:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return c}));var r=wp.element.createElement("svg",{className:"simply-icon",width:"22px",height:"22px",viewBox:"0 0 298.73 298.73",fill:"#0085ba",fillRule:"nonzero"},wp.element.createElement("g",{xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M264.959,9.35H33.787C15.153,9.35,0,24.498,0,43.154v212.461c0,18.634,15.153,33.766,33.787,33.766   h231.171c18.634,0,33.771-15.132,33.771-33.766V43.154C298.73,24.498,283.593,9.35,264.959,9.35z M193.174,59.623   c18.02,0,32.634,14.615,32.634,32.634s-14.615,32.634-32.634,32.634c-18.025,0-32.634-14.615-32.634-32.634   S175.149,59.623,193.174,59.623z M254.363,258.149H149.362H49.039c-9.013,0-13.027-6.521-8.964-14.566l56.006-110.93   c4.058-8.044,11.792-8.762,17.269-1.605l56.316,73.596c5.477,7.158,15.05,7.767,21.386,1.354l13.777-13.951   c6.331-6.413,15.659-5.619,20.826,1.762l35.675,50.959C266.487,252.16,263.376,258.149,254.363,258.149z"}))),o=wp.element.createElement("svg",{enableBackground:"new 0 0 48 48",height:"24px",version:"1.1",viewBox:"0 0 48 48",width:"24px"},wp.element.createElement("g",null,wp.element.createElement("path",{id:"svg_4",d:"m0.062,21.972113l21.943,0l0,-21.943l-21.943,0l0,21.943z",fill:"#0085ba"}),wp.element.createElement("path",{id:"svg_5",d:"m26.027885,21.972113l21.943,0l0,-21.943l-21.943,0l0,21.943z",fill:"#01273a"}),wp.element.createElement("path",{id:"svg_6",d:"m26.027885,47.937997l21.943,0l0,-21.943l-21.943,0l0,21.943z",fill:"#0085ba"}),wp.element.createElement("path",{id:"svg_7",d:"m0.005183,47.937997l21.943,0l0,-21.943l-21.943,0l0,21.943z",fill:"#01273a"}))),a=wp.element.createElement("svg",{enableBackground:"new 0 0 48 48",height:"24px",version:"1.1",viewBox:"0 0 48 48",width:"24px"},wp.element.createElement("g",{xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("rect",{x:"4.204546",transform:"rotate(90 15,11) ",y:"-4.180727",width:"21.07",height:"29.498",fill:"#0085ba"}),wp.element.createElement("rect",{transform:"rotate(-90 33,37) ",y:"22.682727",x:"22.725454",width:"21.07",height:"29.498",fill:"#0085ba"}),wp.element.createElement("rect",{transform:"rotate(90 41,10) ",y:"3.717",x:"30.623183",width:"21.07",height:"13.695",fill:"#01273a"}),wp.element.createElement("rect",{x:"-3.693182",transform:"rotate(90 7,37) ",y:"30.588",width:"21.07",height:"13.695",fill:"#01273a"}))),i=wp.element.createElement("svg",{enableBackground:"new 0 0 48 48",height:"24px",version:"1.1",viewBox:"0 0 48 48",width:"24px"},wp.element.createElement("g",null,wp.element.createElement("rect",{fill:"#0085ba",height:"29.498",width:"21.07",y:"-0.033"}),wp.element.createElement("rect",{fill:"#0085ba",height:"29.498",width:"21.07",x:"26.93",y:"18.535"}),wp.element.createElement("rect",{fill:"#01273a",height:"13.695",width:"21.07",x:"26.93",y:"-0.033"}),wp.element.createElement("rect",{fill:"#01273a",height:"13.695",width:"21.07",y:"34.338"}))),l=wp.element.createElement("svg",{enableBackground:"new 0 0 24 24",height:"24px",version:"1.1",viewBox:"0 0 24 24",width:"24px"},wp.element.createElement("g",null,wp.element.createElement("rect",{height:"12",width:"3",y:"2",x:"0",fill:"#0085ba"}),wp.element.createElement("rect",{height:"12",width:"3",y:"2",x:"21",fill:"#0085ba"}),wp.element.createElement("rect",{height:"17",width:"14",y:"0",x:"5",fill:"#0085ba"}),wp.element.createElement("rect",{height:"5",width:"7",y:"19",x:"0",fill:"#01273a"}),wp.element.createElement("rect",{height:"5",width:"7",y:"19",x:"8.5",fill:"#01273a"}),wp.element.createElement("rect",{height:"5",width:"7",y:"19",x:"17",fill:"#01273a"}))),c=wp.element.createElement("svg",{enableBackground:"new 0 0 24 24",height:"24px",version:"1.1",viewBox:"0 0 24 24",width:"24px"},wp.element.createElement("g",null,wp.element.createElement("rect",{fill:"#0085ba",id:"canvas_background",height:"26",width:"26",y:"0",x:"0"})),wp.element.createElement("g",null,wp.element.createElement("text",{fontWeight:"bold",fontStyle:"normal",xmlSpace:"preserve",textAnchor:"start",fontFamily:"Georgia, Times, 'Times New Roman', serif",fontSize:"18",id:"svg_11",y:"17",x:"0",strokeWidth:"0",stroke:"#fff",fill:"#ffffff"},"[/]")))},8:function(e,t){e.exports=XMLHttpRequest},91:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"name",(function(){return i})),n.d(r,"title",(function(){return a})),n.d(r,"icon",(function(){return o.d})),n.d(r,"settings",(function(){return _e}));var o=n(5),a=(n(91),"Saved SimpLy Gallery"),i="galleries",l=("".concat("pgc_sgb_"+i),n(0));function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=wp.element.Component,g="pgc-sgb-post-blocks-",w=(l.a.trace,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,n,r,o=f(a);function a(){return s(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.thumbURL,n=e.title,r=e.ID,o=e.select,a=e.index,i=e.selected,l=(0,e.editURL)(r);return wp.element.createElement("div",{className:"".concat(g,"item-view ").concat(i?"pgc-selected":"")},wp.element.createElement("div",{className:"".concat(g,"preview-wrapper"),onKeyPress:null,role:"button",tabIndex:a,onClick:function(){o(r)}},wp.element.createElement("div",{className:"".concat(g,"preview")},wp.element.createElement("div",{className:"".concat(g,"thumbnail")},wp.element.createElement("img",{src:t,alt:"thumnail"})),wp.element.createElement("div",{className:"".concat(g,"thumb-title")},n))),wp.element.createElement("a",{className:"".concat(g,"edit-button"),href:l,rel:"noreferrer",target:"_blank"},wp.element.createElement("span",{className:"dashicons dashicons-edit"})))}}])&&u(t.prototype,n),r&&u(t,r),a}(y));function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=wp.element.Component,k=(l.a.trace,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,o=E(a);function a(){return b(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.itemsList,n=e.select,r=e.selectedItemID,o=e.editURL;return wp.element.createElement("div",{className:"".concat("pgc-sgb-post-blocks-","items-list")},t.map((function(e,t){return wp.element.createElement(w,{index:t,ID:e.ID,selected:r&&parseInt(r)===parseInt(e.ID),select:n,key:e.ID||e.title,thumbURL:e.thumbURL,title:e.title,editURL:o})})))}}])&&v(t.prototype,n),r&&v(t,r),a}(P));function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=wp.element,T=A.Component,N=A.Fragment,G=wp.blockEditor.InspectorControls,M=wp.components,z=M.Button,U=M.Spinner,B=wp.components.PanelBody,H="pgc-sgb-post-blocks-",q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(a,e);var t,n,r,o=D(a);function a(){return x(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.itemsList||this.props.getGalleriesList()}},{key:"render",value:function(){var e=this.props,t=e.itemsList,n=e.loading,r=e.getGalleriesList,__=wp.i18n.__,o=window.PGC_SGB_ADMIN,a=new URL("".concat(o.adminurl,"edit.php"));return a.searchParams.set("post_type",o.postType),wp.element.createElement(N,null,wp.element.createElement(G,null,wp.element.createElement(B,{title:__("Select Saved Gallery","simply-gallery-block"),initialOpen:!0},wp.element.createElement("div",{className:"".concat(H,"inspector")},n&&!t&&wp.element.createElement(U,null),t&&wp.element.createElement(N,null,wp.element.createElement(k,this.props),wp.element.createElement("div",{className:"".concat(H,"sub-menu")},wp.element.createElement(z,{isPrimary:!0,onClick:r},__("Reload List","simply-gallery-block")),wp.element.createElement(z,{isPrimary:!0,href:a.toString(),target:"_blank"},__("Create Gallery","simply-gallery-block"))))))))}}])&&R(t.prototype,n),r&&R(t,r),a}(T);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var o=$(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=wp.element,Q=K.Component,Z=K.RawHTML,ee=K.createRef,te=l.a.trace,ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(a,e);var t,n,r,o=Y(a);function a(){var e;return V(this,a),(e=o.apply(this,arguments)).galleryRef=ee(),e.galleryVps=[],e}return t=a,(n=[{key:"componentDidMount",value:function(){var e=window.PGC_SGB;e||te("Error: PGC_SGB is missing."),this.galleryRef&&this.galleryRef.current&&(this.galleryVps=this.galleryRef.current.getElementsByClassName("pgc-sgb-cb")),this.galleryVps.length&&e.searcher.initBlocks()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.htmlForDisplay;return wp.element.createElement("div",{ref:this.galleryRef},wp.element.createElement(Z,{key:"html",className:"pgc-sgb-block-raw"},e))}}])&&J(t.prototype,n),r&&J(t,r),a}(Q);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var o=me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=wp.element,ye=de.Component,ge=de.Fragment,we=wp.components,he=we.Button,be=we.Spinner,ve="pgc-sgb-post-blocks-",Oe=l.a.trace,Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(i,e);var t,n,r,a=ue(i);function i(){var e;return le(this,i),(e=a.apply(this,arguments)).getGalleriesList=e.getGalleriesList.bind(fe(e)),e.postsDataReceivedHandler=e.postsDataReceivedHandler.bind(fe(e)),e.select=e.select.bind(fe(e)),e.postDataReceivedHandler=e.postDataReceivedHandler.bind(fe(e)),e.state=ae({},{loading:!1,itemsList:void 0,selectedItemID:e.props.attributes.galleryId,galleryRawHtml:void 0,getGalleriesList:e.getGalleriesList,select:e.select,editURL:e.editURL}),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.state.selectedItemID&&""!==this.state.selectedItemID&&this.select(this.state.selectedItemID)}},{key:"postsDataReceivedHandler",value:function(e){if(e.data)try{var t=JSON.parse(e.data);if(t.message&&Object.prototype.hasOwnProperty.call(t.message,"data")&&Array.isArray(t.message.data))return void this.setState({loading:!1,itemsList:t.message.data})}catch(e){Oe(e)}this.setState({loading:!1})}},{key:"getGalleriesList",value:function(){var e=window.PGC_SGB_ADMIN;if(e){var t=JSON.stringify({type:"get_posts_by_type",postType:e.postType});this.setState({loading:!0,itemsList:void 0}),l.a.request2(e.ajaxurl,e.nonce,t,null,this.postsDataReceivedHandler)}}},{key:"postDataReceivedHandler",value:function(e){var __=wp.i18n.__;if(e.data)try{var t=JSON.parse(e.data);if(t.message&&t.message.data&&t.message.data.raw){var n=t.message.data.raw;this.setState({loading:!1,galleryRawHtml:n}),this.props.setAttributes({galleryId:"".concat(this.state.selectedItemID)})}}catch(e){var r="<div>".concat(__("gallery is not available!","simply-gallery-block"),"</div>");this.setState({loading:!1,galleryRawHtml:r})}}},{key:"select",value:function(e){var t=window.PGC_SGB_ADMIN;if(t){var n=JSON.stringify({type:"get_post_content",postID:e});this.setState({loading:!0,selectedItemID:e,galleryRawHtml:void 0}),l.a.request2(t.ajaxurl,t.nonce,n,null,this.postDataReceivedHandler)}}},{key:"editURL",value:function(e){var t=window.PGC_SGB_ADMIN,n=new URL("".concat(t.adminurl,"post.php"));return n.searchParams.set("post",e),n.searchParams.set("action","edit"),n}},{key:"render",value:function(){var __=wp.i18n.__,e=window.PGC_SGB_ADMIN,t=this.state,n=t.selectedItemID,r=t.itemsList,a=t.loading,i=t.galleryRawHtml,l=new URL("".concat(e.adminurl,"edit.php"));return l.searchParams.set("post_type",e.postType),wp.element.createElement(ge,null,""===n&&wp.element.createElement("div",{className:"".concat(ve,"place-holder")},wp.element.createElement("div",{className:"".concat(ve,"header")},wp.element.createElement("div",{className:"".concat(ve,"beta"),title:"BETA"},wp.element.createElement("span",{className:"dashicons dashicons-star-filled"})),o.d,__("Saved SimpLy Gallery","simply-gallery-block"),wp.element.createElement("div",{className:"".concat(ve,"description")},__("* the selected gallery will be a mirror copy of the saved gallery and will automatically update after the original one.","simply-gallery-block"))),wp.element.createElement("div",{className:"".concat(ve,"selector")},!r&&!a&&wp.element.createElement(he,{isPrimary:!0,onClick:this.getGalleriesList},__("Select a saved gallery","simply-gallery-block")),a&&wp.element.createElement(be,null),!a&&r&&0!==r.length&&wp.element.createElement(ge,null,wp.element.createElement(k,this.state),wp.element.createElement("div",{className:"".concat(ve,"sub-menu")},wp.element.createElement(he,{isPrimary:!0,onClick:this.getGalleriesList},__("Reload List","simply-gallery-block")),wp.element.createElement(he,{isPrimary:!0,href:l.toString(),target:"_blank"},__("Create Gallery","simply-gallery-block")))),!a&&r&&0===r.length&&wp.element.createElement("div",{className:"".concat(ve,"alert")},wp.element.createElement("p",null,__("Your galleries directory is empty.","simply-gallery-block")),wp.element.createElement("div",{className:"".concat(ve,"sub-menu")},wp.element.createElement(he,{isPrimary:!0,onClick:this.getGalleriesList},__("Reload List","simply-gallery-block")),wp.element.createElement(he,{isPrimary:!0,href:l.toString(),target:"_blank"},__("Create Gallery","simply-gallery-block")))))),(!i&&""!==n||r)&&a&&wp.element.createElement(ge,null,r&&wp.element.createElement(q,this.state),wp.element.createElement("div",{className:"".concat(ve,"place-holder")},wp.element.createElement("div",{className:"".concat(ve,"selector")},wp.element.createElement(be,null)))),i&&""!==i&&wp.element.createElement(ge,null,wp.element.createElement(q,this.state),wp.element.createElement(ge,null,wp.element.createElement(ne,{htmlForDisplay:i}))))}}])&&ce(t.prototype,n),r&&ce(t,r),i}(ye),_e={title:a,description:wp.i18n.__("Display saved SimpLy Gallery.","simply-gallery-block"),keywords:[wp.i18n.__("galleries","simply-gallery-block"),wp.i18n.__("gallery","simply-gallery-block"),wp.i18n.__("shortcode","simply-gallery-block"),"simply"],attributes:{galleryId:{type:"string",default:""}},supports:{html:!1},edit:Ee,save:function(){return null}};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var je,xe=wp.blocks.registerBlockType,Re=wp.blocks,Ie=Re.getCategories,De=Re.setCategories,Le={slug:"pgc-simply-gallery-block",title:"SimpLy Gallery Block"},Ce={};Ce.logo=o.e,De([{slug:Le.slug,title:Le.title,icon:Ce.logo}].concat(function(e){if(Array.isArray(e))return ke(e)}(je=Ie().filter((function(e){return e.slug!==Le.slug})))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(je)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(je)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),[r].forEach((function(e){if(e){var t=e.name,n=e.icon,r=e.settings;xe("pgcsimplygalleryblock/".concat(t),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({category:Le.slug,icon:{src:n,foreground:"#0085ba"}},r))}}))}});